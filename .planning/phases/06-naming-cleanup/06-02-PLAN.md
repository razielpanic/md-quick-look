---
phase: 06-naming-cleanup
plan: 02
type: execute
wave: 2
depends_on: ["06-01"]
files_modified:
  - MDQuickLook/MDQuickLook/PreviewViewController.swift
  - MDQuickLook/MDQuickLook/MarkdownRenderer.swift
  - MDQuickLook/MDQuickLook/MarkdownLayoutManager.swift
  - MDQuickLook/MDQuickLook/TableRenderer.swift
  - MDQuickLook/MDQuickLook/Info.plist
  - MDQuickLook/MDQuickLook Extension/Info.plist
autonomous: true

must_haves:
  truths:
    - "No 'spotlighter' references exist in Swift source files"
    - "No 'razielpanic' references exist in bundle identifiers"
    - "User-facing name 'MD Quick Look' appears in both Info.plist files"
    - "OSLog subsystems use com.rocketpop.MDQuickLook"
  artifacts:
    - path: "MDQuickLook/MDQuickLook/Info.plist"
      provides: "Main app bundle configuration"
      contains: "com.rocketpop.MDQuickLook"
    - path: "MDQuickLook/MDQuickLook Extension/Info.plist"
      provides: "Extension bundle configuration"
      contains: "com.rocketpop.MDQuickLook.Extension"
  key_links:
    - from: "PreviewViewController.swift"
      to: "OSLog subsystem"
      via: "Logger initialization"
      pattern: "com.rocketpop.MDQuickLook"
    - from: "Extension Info.plist CFBundleIdentifier"
      to: "Main app CFBundleIdentifier"
      via: "prefix nesting"
      pattern: "com.rocketpop.MDQuickLook.Extension"
---

<objective>
Update Swift source files and Info.plist files with new bundle identifiers, OSLog subsystems, and user-facing display names.

Purpose: Complete the source-level naming cleanup after directory/project structure is verified working from Plan 06-01.

Output: All source files updated with consistent "MD Quick Look" naming and "com.rocketpop.MDQuickLook" identifiers.
</objective>

<execution_context>
@/Users/razielpanic/.claude/get-shit-done/workflows/execute-plan.md
@/Users/razielpanic/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/06-naming-cleanup/06-CONTEXT.md
@.planning/phases/06-naming-cleanup/06-01-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update Swift source files with new identifiers</name>
  <files>
    MDQuickLook/MDQuickLook/PreviewViewController.swift
    MDQuickLook/MDQuickLook/MarkdownRenderer.swift
    MDQuickLook/MDQuickLook/MarkdownLayoutManager.swift
    MDQuickLook/MDQuickLook/TableRenderer.swift
  </files>
  <action>
    **Swift files - OSLog subsystems:** Replace `com.razielpanic.md-spotlighter` with `com.rocketpop.MDQuickLook` in:
    - PreviewViewController.swift (line 7): OSLog subsystem
    - MarkdownRenderer.swift (line 7): OSLog subsystem
    - MarkdownLayoutManager.swift (line 5): OSLog subsystem
    - TableRenderer.swift (line 7): OSLog subsystem

    **Swift files - Other references:**
    - PreviewViewController.swift (line 19): Change `"=== MD Spotlighter Quick Look Extension ==="` to `"=== MD Quick Look Extension ==="`
    - PreviewViewController.swift (lines 28, 43): Change error domain `"MDSpotlighter"` to `"MDQuickLook"`

    DO NOT commit yet - Info.plist updates come next.
  </action>
  <verify>
    - `grep -r "spotlighter" MDQuickLook/MDQuickLook/*.swift` returns no matches
    - `grep -r "razielpanic" MDQuickLook/MDQuickLook/*.swift` returns no matches
    - `grep "com.rocketpop.MDQuickLook" MDQuickLook/MDQuickLook/PreviewViewController.swift` returns match
  </verify>
  <done>
    All Swift source files updated with new bundle identifiers, OSLog subsystems, and error domains.
  </done>
</task>

<task type="auto">
  <name>Task 2: Update Info.plist files with new identifiers and display names</name>
  <files>
    MDQuickLook/MDQuickLook/Info.plist (main app - same directory as main.swift)
    MDQuickLook/MDQuickLook Extension/Info.plist (extension - same directory as PreviewViewController.swift)
  </files>
  <action>
    **IMPORTANT - Info.plist disambiguation:**
    After Plan 06-01 renames, the project has two Info.plist files:

    1. **Main App Info.plist**: `MDQuickLook/MDQuickLook/Info.plist`
       - Located in same directory as `main.swift`
       - This is the host application plist
       - Update:
         - CFBundleIdentifier: `com.razielpanic.md-spotlighter` -> `com.rocketpop.MDQuickLook`
         - CFBundleName: `MD Spotlighter` -> `MD Quick Look`

    2. **Extension Info.plist**: `MDQuickLook/MDQuickLook Extension/Info.plist`
       - Located in the directory with `PreviewViewController.swift`
       - Note: Directory may still be named "MDQuickLook" but contains extension files
       - This is the Quick Look extension plist
       - Update:
         - CFBundleIdentifier: `com.razielpanic.md-spotlighter.quicklook` -> `com.rocketpop.MDQuickLook.Extension`
         - CFBundleName: `.md for QuickLook` -> `MD Quick Look`
         - CFBundleDisplayName (if exists): `.md for QuickLook` -> `MD Quick Look`

    **Verification to distinguish the two:**
    - Main app plist: `plutil -p MDQuickLook/MDQuickLook/Info.plist | grep -i principal` should NOT have NSExtensionPrincipalClass
    - Extension plist: Has NSExtensionPrincipalClass key (PreviewViewController)

    **Create atomic commit after all source file updates:**
    - Stage all changes: `git add -A`
    - Commit with message:
      ```
      refactor(naming): rename project from md-spotlighter to MD Quick Look

      - Rename Xcode project: md-spotlighter.xcodeproj -> MDQuickLook.xcodeproj
      - Rename app source: md-spotlighter/ -> MDQuickLook/
      - Update bundle IDs: com.rocketpop.MDQuickLook (app), com.rocketpop.MDQuickLook.Extension (extension)
      - Update display name: "MD Quick Look" in all user-facing locations
      - Update OSLog subsystems and error domains
      - Update Makefile build configuration

      All changes preserve git history via git mv renames.
      ```
  </action>
  <verify>
    - `plutil -lint MDQuickLook/MDQuickLook/Info.plist` shows "OK"
    - `grep "com.rocketpop.MDQuickLook.Extension"` in extension Info.plist returns match
    - `grep "com.rocketpop.MDQuickLook"` in main app Info.plist returns match (without .Extension suffix)
    - `grep -ri "spotlighter" MDQuickLook/` returns no matches
    - `git log -1 --oneline` shows atomic commit
  </verify>
  <done>
    Both Info.plist files updated with correct bundle IDs and display names. All source changes committed atomically.
  </done>
</task>

</tasks>

<verification>
**Plan verification checklist:**

1. **No spotlighter references in source:**
   - `grep -ri "spotlighter" MDQuickLook/` returns no matches

2. **Correct bundle identifiers:**
   - Main app: `com.rocketpop.MDQuickLook`
   - Extension: `com.rocketpop.MDQuickLook.Extension`

3. **User-facing name correct:**
   - "MD Quick Look" appears in both CFBundleName fields

4. **Changes committed:**
   - Single atomic commit with all rename changes
</verification>

<success_criteria>
- Zero "spotlighter" references in Swift files and plists
- Zero "razielpanic" references in bundle identifiers
- OSLog subsystems use com.rocketpop.MDQuickLook
- Both Info.plist files use "MD Quick Look" display name
- All changes in single atomic commit
</success_criteria>

<output>
After completion, create `.planning/phases/06-naming-cleanup/06-02-SUMMARY.md`
</output>
