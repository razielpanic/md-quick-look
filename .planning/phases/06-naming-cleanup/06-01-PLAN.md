---
phase: 06-naming-cleanup
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - md-spotlighter/md-spotlighter.xcodeproj/project.pbxproj
  - Makefile
autonomous: false

must_haves:
  truths:
    - "No 'spotlighter' references exist in project.pbxproj"
    - "Bundle identifiers use 'com.rocketpop.MDQuickLook' pattern"
    - "Project builds successfully after directory and project renames"
  artifacts:
    - path: "MDQuickLook/MDQuickLook.xcodeproj/project.pbxproj"
      provides: "Xcode project configuration with new naming"
      contains: "com.rocketpop.MDQuickLook"
    - path: "Makefile"
      provides: "Build automation with new naming"
      contains: "MDQuickLook"
  key_links:
    - from: "project.pbxproj"
      to: "Info.plist paths"
      via: "INFOPLIST_FILE build setting"
      pattern: "MDQuickLook/Info.plist"
    - from: "Extension bundle ID"
      to: "Main app bundle ID"
      via: "prefix nesting"
      pattern: "com.rocketpop.MDQuickLook.Extension"
---

<objective>
Rename directory structure and Xcode project from legacy "md-spotlighter" to "MDQuickLook", update project.pbxproj with new bundle identifiers, and verify the project builds.

Purpose: Establish the foundation for the naming cleanup - directories, project file, and build configuration must work before updating source files.

Output: Renamed Xcode project structure that builds successfully with new bundle identifiers.
</objective>

<execution_context>
@/Users/razielpanic/.claude/get-shit-done/workflows/execute-plan.md
@/Users/razielpanic/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/06-naming-cleanup/06-CONTEXT.md
@.planning/phases/06-naming-cleanup/06-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Rename directories, update project.pbxproj, and Makefile</name>
  <files>
    md-spotlighter/md-spotlighter/ (rename to MDQuickLook/)
    md-spotlighter/md-spotlighter.xcodeproj/ (rename to MDQuickLook.xcodeproj/)
    md-spotlighter/ (rename to MDQuickLook/)
    project.pbxproj
    Makefile
  </files>
  <action>
    Use git mv with two-step renames (for case-sensitivity on macOS):

    1. Rename main app source directory:
       - `git mv md-spotlighter/md-spotlighter md-spotlighter/temp-app`
       - `git mv md-spotlighter/temp-app md-spotlighter/MDQuickLook`

    2. Rename Xcode project directory:
       - `git mv md-spotlighter/md-spotlighter.xcodeproj md-spotlighter/temp-proj.xcodeproj`
       - `git mv md-spotlighter/temp-proj.xcodeproj md-spotlighter/MDQuickLook.xcodeproj`

    3. Rename project folder:
       - `git mv md-spotlighter temp-project`
       - `git mv temp-project MDQuickLook`

    4. Update project.pbxproj with these replacements (in order):
       - Replace all `"md-spotlighter"` with `"MDQuickLook"` (quoted strings for target/product names)
       - Replace all `md-spotlighter.app` with `MDQuickLook.app`
       - Replace all `com.razielpanic.md-spotlighter.quicklook` with `com.rocketpop.MDQuickLook.Extension`
       - Replace all `com.razielpanic.md-spotlighter` with `com.rocketpop.MDQuickLook`
       - Update INFOPLIST_FILE paths: `md-spotlighter/Info.plist` -> `MDQuickLook/Info.plist`
       - Replace all `path = "md-spotlighter"` with `path = "MDQuickLook"`

    5. Update Makefile:
       - PROJECT_DIR: `md-spotlighter` -> `MDQuickLook`
       - SCHEME: `md-spotlighter` -> `MDQuickLook`
       - APP_NAME: `md-spotlighter.app` -> `MDQuickLook.app`
       - xcodebuild project path: `md-spotlighter.xcodeproj` -> `MDQuickLook.xcodeproj`
       - killall command: `md-spotlighter` -> `MDQuickLook`
       - Add cleanup of old app name in clean target: `rm -rf "$(INSTALL_DIR)/md-spotlighter.app"`

    DO NOT commit yet - build verification comes next.
  </action>
  <verify>
    - `ls MDQuickLook/MDQuickLook.xcodeproj/` shows project.pbxproj
    - `ls MDQuickLook/MDQuickLook/` shows main.swift and Info.plist
    - `grep -r "spotlighter" MDQuickLook/MDQuickLook.xcodeproj/project.pbxproj` returns no matches
    - `grep "com.rocketpop.MDQuickLook" MDQuickLook/MDQuickLook.xcodeproj/project.pbxproj` returns matches
  </verify>
  <done>
    Directory structure renamed: md-spotlighter/ -> MDQuickLook/, project.pbxproj and Makefile updated with new naming scheme.
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
    Directory and Xcode project rename from "md-spotlighter" to "MDQuickLook":
    - Directory structure: MDQuickLook/MDQuickLook.xcodeproj/, MDQuickLook/MDQuickLook/
    - Bundle IDs in project.pbxproj: com.rocketpop.MDQuickLook, com.rocketpop.MDQuickLook.Extension
    - Makefile updated with new paths and names
  </what-built>
  <how-to-verify>
    1. Open Xcode: `open MDQuickLook/MDQuickLook.xcodeproj`
    2. Verify project structure looks correct in Project Navigator
    3. Build in Xcode (Cmd+B) - should succeed (even though Info.plist/Swift still have old names)
    4. Or run: `xcodebuild -project MDQuickLook/MDQuickLook.xcodeproj -scheme MDQuickLook -configuration Release -derivedDataPath build build`
    5. Run: `grep -r "spotlighter" MDQuickLook/MDQuickLook.xcodeproj/project.pbxproj` - should return nothing
  </how-to-verify>
  <resume-signal>Type "verified" to proceed with source file updates, or describe issues</resume-signal>
</task>

</tasks>

<verification>
**Plan verification checklist:**

1. **Directory structure correct:**
   - MDQuickLook/MDQuickLook.xcodeproj/ exists
   - MDQuickLook/MDQuickLook/ contains source files

2. **project.pbxproj updated:**
   - No "spotlighter" references
   - Bundle IDs use com.rocketpop.MDQuickLook pattern

3. **Makefile updated:**
   - References new MDQuickLook paths
   - Clean target removes old app name

4. **Build succeeds:**
   - xcodebuild completes without errors
</verification>

<success_criteria>
- Directory structure renamed with git mv (preserves history)
- Zero "spotlighter" references in project.pbxproj
- Zero "razielpanic" references in bundle identifiers
- Makefile uses new paths
- Project compiles and builds successfully
</success_criteria>

<output>
After completion, create `.planning/phases/06-naming-cleanup/06-01-SUMMARY.md`
</output>
