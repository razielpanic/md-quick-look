---
phase: 06-naming-cleanup
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - MDQuickLook/MDQuickLook.xcodeproj/project.pbxproj
  - MDQuickLook/MDQuickLook/Info.plist
  - MDQuickLook/MDQuickLook/main.swift
  - MDQuickLook/MDQuickLook/Info.plist
  - MDQuickLook/MDQuickLook/PreviewViewController.swift
  - MDQuickLook/MDQuickLook/MarkdownRenderer.swift
  - MDQuickLook/MDQuickLook/MarkdownLayoutManager.swift
  - MDQuickLook/MDQuickLook/TableRenderer.swift
  - Makefile
  - .planning/config.json
autonomous: false

must_haves:
  truths:
    - "No 'spotlighter' references exist in Swift source files"
    - "No 'spotlighter' references exist in project.pbxproj"
    - "Bundle identifiers use 'com.rocketpop.MDQuickLook' pattern"
    - "User-facing name 'MD Quick Look' appears in Info.plist files"
    - "Project builds successfully after all renames"
    - "GitHub repository is renamed to 'md-quick-look'"
  artifacts:
    - path: "MDQuickLook/MDQuickLook.xcodeproj/project.pbxproj"
      provides: "Xcode project configuration with new naming"
      contains: "com.rocketpop.MDQuickLook"
    - path: "MDQuickLook/MDQuickLook/Info.plist"
      provides: "Main app bundle configuration"
      contains: "com.rocketpop.MDQuickLook"
    - path: "MDQuickLook/MDQuickLook/Info.plist"
      provides: "Extension bundle configuration"
      contains: "com.rocketpop.MDQuickLook.Extension"
    - path: "Makefile"
      provides: "Build automation with new naming"
      contains: "MDQuickLook"
  key_links:
    - from: "project.pbxproj"
      to: "Info.plist paths"
      via: "INFOPLIST_FILE build setting"
      pattern: "MDQuickLook/Info.plist"
    - from: "Extension bundle ID"
      to: "Main app bundle ID"
      via: "prefix nesting"
      pattern: "com.rocketpop.MDQuickLook.Extension"
---

<objective>
Rename the entire project from legacy "md-spotlighter" naming to consistent "MD Quick Look" branding with "com.rocketpop.MDQuickLook" bundle identifiers.

Purpose: Establish proper public identity before v1.1 GitHub release - remove development-phase naming artifacts.

Output: Fully renamed Xcode project that builds successfully, with GitHub repository renamed from `md-spotlighter` to `md-quick-look`.
</objective>

<execution_context>
@/Users/razielpanic/.claude/get-shit-done/workflows/execute-plan.md
@/Users/razielpanic/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/06-naming-cleanup/06-CONTEXT.md
@.planning/phases/06-naming-cleanup/06-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Rename directories and update Xcode project structure</name>
  <files>
    md-spotlighter/md-spotlighter/ (rename to MDQuickLook/)
    md-spotlighter/md-spotlighter.xcodeproj/ (rename to MDQuickLook.xcodeproj/)
    md-spotlighter/ (rename to MDQuickLook/)
    project.pbxproj
  </files>
  <action>
    Use git mv with two-step renames (for case-sensitivity on macOS):

    1. Rename main app source directory:
       - `git mv md-spotlighter/md-spotlighter md-spotlighter/temp-app`
       - `git mv md-spotlighter/temp-app md-spotlighter/MDQuickLook`

    2. Rename Xcode project directory:
       - `git mv md-spotlighter/md-spotlighter.xcodeproj md-spotlighter/temp-proj.xcodeproj`
       - `git mv md-spotlighter/temp-proj.xcodeproj md-spotlighter/MDQuickLook.xcodeproj`

    3. Rename project folder:
       - `git mv md-spotlighter temp-project`
       - `git mv temp-project MDQuickLook`

    4. Update project.pbxproj with these replacements (in order):
       - Replace all `"md-spotlighter"` with `"MDQuickLook"` (quoted strings for target/product names)
       - Replace all `md-spotlighter.app` with `MDQuickLook.app`
       - Replace all `com.razielpanic.md-spotlighter.quicklook` with `com.rocketpop.MDQuickLook.Extension`
       - Replace all `com.razielpanic.md-spotlighter` with `com.rocketpop.MDQuickLook`
       - Update INFOPLIST_FILE paths: `md-spotlighter/Info.plist` -> `MDQuickLook/Info.plist`
       - Replace all `path = "md-spotlighter"` with `path = "MDQuickLook"`

    DO NOT commit yet - all changes will be committed atomically in Task 3.
  </action>
  <verify>
    - `ls MDQuickLook/MDQuickLook.xcodeproj/` shows project.pbxproj
    - `ls MDQuickLook/MDQuickLook/` shows main.swift and Info.plist
    - `ls MDQuickLook/MDQuickLook/` shows extension source files
    - `grep -r "spotlighter" MDQuickLook/MDQuickLook.xcodeproj/project.pbxproj` returns no matches
    - `grep "com.rocketpop.MDQuickLook" MDQuickLook/MDQuickLook.xcodeproj/project.pbxproj` returns matches
  </verify>
  <done>
    Directory structure renamed: md-spotlighter/ -> MDQuickLook/, all project.pbxproj references updated to new naming scheme.
  </done>
</task>

<task type="auto">
  <name>Task 2: Update Swift source files and Info.plist files</name>
  <files>
    MDQuickLook/MDQuickLook/PreviewViewController.swift
    MDQuickLook/MDQuickLook/MarkdownRenderer.swift
    MDQuickLook/MDQuickLook/MarkdownLayoutManager.swift
    MDQuickLook/MDQuickLook/TableRenderer.swift
    MDQuickLook/MDQuickLook/Info.plist (main app)
    MDQuickLook/MDQuickLook/Info.plist (extension)
  </files>
  <action>
    **Swift files - OSLog subsystems:** Replace `com.razielpanic.md-spotlighter` with `com.rocketpop.MDQuickLook` in:
    - PreviewViewController.swift (line 7): OSLog subsystem
    - MarkdownRenderer.swift (line 7): OSLog subsystem
    - MarkdownLayoutManager.swift (line 5): OSLog subsystem
    - TableRenderer.swift (line 7): OSLog subsystem

    **Swift files - Other references:**
    - PreviewViewController.swift (line 19): Change `"=== MD Spotlighter Quick Look Extension ==="` to `"=== MD Quick Look Extension ==="`
    - PreviewViewController.swift (lines 28, 43): Change error domain `"MDSpotlighter"` to `"MDQuickLook"`

    **Main App Info.plist** (MDQuickLook/MDQuickLook/Info.plist - the one with main.swift):
    - CFBundleIdentifier: `com.razielpanic.md-spotlighter` -> `com.rocketpop.MDQuickLook`
    - CFBundleName: `MD Spotlighter` -> `MD Quick Look`

    **Extension Info.plist** (MDQuickLook/MDQuickLook/Info.plist - in the folder with PreviewViewController):
    - CFBundleIdentifier: `com.razielpanic.md-spotlighter.quicklook` -> `com.rocketpop.MDQuickLook.Extension`
    - CFBundleName: `.md for QuickLook` -> `MD Quick Look`
    - CFBundleDisplayName (if exists): `.md for QuickLook` -> `MD Quick Look`

    DO NOT commit yet - all changes will be committed atomically in Task 3.
  </action>
  <verify>
    - `grep -r "spotlighter" MDQuickLook/MDQuickLook/*.swift` returns no matches
    - `grep -r "razielpanic" MDQuickLook/MDQuickLook/*.swift` returns no matches
    - `grep "com.rocketpop.MDQuickLook" MDQuickLook/MDQuickLook/PreviewViewController.swift` returns match
    - `plutil -lint MDQuickLook/MDQuickLook/Info.plist` (both) shows "OK"
    - `grep "com.rocketpop.MDQuickLook.Extension" MDQuickLook/MDQuickLook/Info.plist` returns match (extension plist)
  </verify>
  <done>
    All Swift source files updated with new bundle identifiers and naming. Both Info.plist files updated with correct bundle IDs and display names.
  </done>
</task>

<task type="auto">
  <name>Task 3: Update Makefile, planning docs, and create atomic commit</name>
  <files>
    Makefile
    .planning/config.json
    .planning/*.md (documentation files)
  </files>
  <action>
    **Makefile updates:**
    - PROJECT_DIR: `md-spotlighter` -> `MDQuickLook`
    - SCHEME: `md-spotlighter` -> `MDQuickLook`
    - APP_NAME: `md-spotlighter.app` -> `MDQuickLook.app`
    - xcodebuild project path: `md-spotlighter.xcodeproj` -> `MDQuickLook.xcodeproj`
    - killall command: `md-spotlighter` -> `MDQuickLook`
    - Add cleanup of old app name in clean target: `rm -rf "$(INSTALL_DIR)/md-spotlighter.app"`

    **Planning config:**
    - `.planning/config.json`: Change `"project_name": "md-spotlighter"` to `"project_name": "md-quick-look"`

    **Build verification:**
    - Run `xcodebuild -project MDQuickLook/MDQuickLook.xcodeproj -scheme MDQuickLook -configuration Release -derivedDataPath build build`
    - Build must succeed with no errors

    **Create atomic commit:**
    - Stage all changes: `git add -A`
    - Verify staged files with `git status`
    - Commit with message:
      ```
      refactor(naming): rename project from md-spotlighter to MD Quick Look

      - Rename Xcode project: md-spotlighter.xcodeproj -> MDQuickLook.xcodeproj
      - Rename app source: md-spotlighter/ -> MDQuickLook/
      - Update bundle IDs: com.rocketpop.MDQuickLook (app), com.rocketpop.MDQuickLook.Extension (extension)
      - Update display name: "MD Quick Look" in all user-facing locations
      - Update OSLog subsystems and error domains
      - Update Makefile build configuration

      All changes preserve git history via git mv renames.
      ```

    DO NOT rename GitHub repository yet - that's in the checkpoint task.
  </action>
  <verify>
    - `xcodebuild` completes with BUILD SUCCEEDED
    - `git log -1 --oneline` shows new commit
    - `grep -r "spotlighter" MDQuickLook/` returns no matches in source files
    - `grep -r "razielpanic" MDQuickLook/` returns no matches
    - Build product exists at `build/Build/Products/Release/MDQuickLook.app`
  </verify>
  <done>
    Makefile updated, planning config updated, project builds successfully, all changes committed atomically.
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
    Complete project rename from "md-spotlighter" to "MD Quick Look":
    - Directory structure: MDQuickLook/MDQuickLook.xcodeproj/, MDQuickLook/MDQuickLook/
    - Bundle IDs: com.rocketpop.MDQuickLook, com.rocketpop.MDQuickLook.Extension
    - All Swift files updated with new identifiers
    - Project builds successfully
  </what-built>
  <how-to-verify>
    1. Open Xcode: `open MDQuickLook/MDQuickLook.xcodeproj`
    2. Verify project structure looks correct in Project Navigator
    3. Build in Xcode (Cmd+B) - should succeed
    4. Run `make install` from terminal
    5. Check /Applications has "MDQuickLook.app"
    6. Open Finder, select a .md file, press spacebar - Quick Look should work
    7. Run: `grep -ri "spotlighter" MDQuickLook/` - should return nothing
  </how-to-verify>
  <resume-signal>Type "verified" to proceed with GitHub repository rename, or describe issues</resume-signal>
</task>

<task type="auto">
  <name>Task 5: Rename GitHub repository</name>
  <files>
    .git/config (remote URL updated automatically)
  </files>
  <action>
    **Rename GitHub repository:**
    - Run: `gh repo rename md-quick-look -y`
    - This renames the remote repository from "md-spotlighter" to "md-quick-look"
    - GitHub automatically creates redirects from old URL

    **Update remote URL:**
    - Run: `git remote set-url origin https://github.com/razielpanic/md-quick-look.git`
    - Verify with: `git remote -v`

    **Push changes:**
    - Run: `git push`

    **Update planning documentation references (optional, low priority):**
    - Major documentation files (.planning/*.md) can retain historical references
    - Update STATE.md and PROJECT.md references to "md-quick-look" for accuracy
    - This is editorial cleanup, not blocking
  </action>
  <verify>
    - `gh repo view` shows repository name as "md-quick-look"
    - `git remote -v` shows new URL
    - Visit https://github.com/razielpanic/md-quick-look - repository loads
    - Visit https://github.com/razielpanic/md-spotlighter - redirects to new URL
  </verify>
  <done>
    GitHub repository renamed to "md-quick-look", remote URLs updated, changes pushed.
  </done>
</task>

</tasks>

<verification>
**Final verification checklist:**

1. **No spotlighter references in source code:**
   - `grep -ri "spotlighter" MDQuickLook/` returns no matches

2. **Correct bundle identifiers:**
   - Main app: `com.rocketpop.MDQuickLook`
   - Extension: `com.rocketpop.MDQuickLook.Extension`

3. **User-facing name correct:**
   - "MD Quick Look" appears in Info.plist CFBundleName fields

4. **Build succeeds:**
   - `make build` completes without errors
   - App bundle at `build/Build/Products/Release/MDQuickLook.app`

5. **Quick Look extension works:**
   - `make install && make reload`
   - Spacebar preview of .md file shows rendered markdown

6. **GitHub repository renamed:**
   - Old URL redirects to new URL
   - Remote URL updated in local git config
</verification>

<success_criteria>
- Zero "spotlighter" references in Swift files, plists, or project.pbxproj
- Zero "razielpanic" references in bundle identifiers
- Project compiles and builds successfully
- Quick Look extension loads and renders markdown
- GitHub repository accessible at github.com/razielpanic/md-quick-look
- All changes in single atomic commit (plus GitHub rename)
</success_criteria>

<output>
After completion, create `.planning/phases/06-naming-cleanup/06-01-SUMMARY.md`
</output>
