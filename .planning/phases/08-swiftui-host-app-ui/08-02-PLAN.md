---
phase: 08-swiftui-host-app-ui
plan: 02
type: execute
wave: 2
depends_on: ["08-01"]
files_modified:
  - MDQuickLook/MDQuickLook/Views/AboutView.swift
  - MDQuickLook/MDQuickLook/Views/SettingsView.swift
  - MDQuickLook/MDQuickLook/Views/FirstLaunchView.swift
  - MDQuickLook/MDQuickLook/Models/AppState.swift
  - MDQuickLook/MDQuickLook/MDQuickLookApp.swift
  - MDQuickLook/MDQuickLook.xcodeproj/project.pbxproj
autonomous: true

must_haves:
  truths:
    - "About window displays app icon, name, version, GitHub link, and copyright"
    - "About window GitHub link opens in browser when clicked"
    - "First-launch window shows extension status and link to System Settings"
    - "First-launch window has dismiss option (Don't show again)"
    - "Preferences window shows extension status after first launch"
    - "All views adapt to light and dark appearance modes"
  artifacts:
    - path: "MDQuickLook/MDQuickLook/Views/AboutView.swift"
      provides: "About window content with icon, version, GitHub link, credits"
      contains: "struct AboutView"
    - path: "MDQuickLook/MDQuickLook/Views/SettingsView.swift"
      provides: "Preferences window with extension status"
      contains: "struct SettingsView"
    - path: "MDQuickLook/MDQuickLook/Views/FirstLaunchView.swift"
      provides: "First-launch status window with dismiss"
      contains: "struct FirstLaunchView"
    - path: "MDQuickLook/MDQuickLook/Models/AppState.swift"
      provides: "Bundle extension for version access"
      contains: "extension Bundle"
  key_links:
    - from: "AboutView.swift"
      to: "GitHub repository"
      via: "Link view"
      pattern: "Link\\(.*github"
    - from: "AboutView.swift"
      to: "Bundle.main"
      via: "Version display"
      pattern: "Bundle\\.main\\.releaseVersionNumber"
    - from: "FirstLaunchView.swift"
      to: "System Settings"
      via: "openURL with x-apple.systempreferences"
      pattern: "x-apple\\.systempreferences"
    - from: "SettingsView.swift"
      to: "System Settings"
      via: "openURL link"
      pattern: "x-apple\\.systempreferences"
---

<objective>
Create all UI views: About window, Preferences window, and First-launch status window.

Purpose: Deliver the user-facing UI components that make MD Quick Look a polished macOS application. About window provides app information and GitHub link. First-launch window guides new users to enable the extension. Preferences window provides ongoing extension status access.

Output: Three SwiftUI views (AboutView, SettingsView, FirstLaunchView) plus Bundle extension for version access. All views work in light and dark modes using semantic colors.
</objective>

<execution_context>
@/Users/razielpanic/.claude/get-shit-done/workflows/execute-plan.md
@/Users/razielpanic/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/08-swiftui-host-app-ui/08-CONTEXT.md
@.planning/phases/08-swiftui-host-app-ui/08-RESEARCH.md
@.planning/phases/08-swiftui-host-app-ui/08-01-SUMMARY.md
@MDQuickLook/MDQuickLook/MDQuickLookApp.swift
@MDQuickLook/MDQuickLook/Info.plist
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create AboutView and Bundle extension</name>
  <files>
MDQuickLook/MDQuickLook/Views/AboutView.swift
MDQuickLook/MDQuickLook/Models/AppState.swift
  </files>
  <action>
Create directory structure:
- MDQuickLook/MDQuickLook/Views/
- MDQuickLook/MDQuickLook/Models/

Create AppState.swift with Bundle extension:
```swift
import Foundation

extension Bundle {
    var releaseVersionNumber: String? {
        return infoDictionary?["CFBundleShortVersionString"] as? String
    }

    var buildVersionNumber: String? {
        return infoDictionary?["CFBundleVersion"] as? String
    }
}
```

Create AboutView.swift with standard macOS About window layout:
```swift
import SwiftUI

struct AboutView: View {
    var body: some View {
        VStack(spacing: 16) {
            // App icon from asset catalog
            Image(nsImage: NSApp.applicationIconImage)
                .resizable()
                .frame(width: 128, height: 128)

            // App name
            Text("MD Quick Look")
                .font(.title)
                .fontWeight(.semibold)

            // Version
            Text("Version \(Bundle.main.releaseVersionNumber ?? "Unknown")")
                .font(.subheadline)
                .foregroundColor(.secondary)

            Divider()
                .frame(width: 200)

            // GitHub link (displayed as URL per CONTEXT.md)
            Link("github.com/razielpanic/md-quick-look",
                 destination: URL(string: "https://github.com/razielpanic/md-quick-look")!)
                .font(.body)

            Spacer()
                .frame(height: 8)

            // Copyright and brief description
            Text("Quick Look extension for Markdown files")
                .font(.caption)
                .foregroundColor(.secondary)

            Text("Â© 2026 Rocketpop")
                .font(.caption)
                .foregroundColor(.secondary)
        }
        .padding(24)
        .frame(width: 320, height: 340)
    }
}
```

Note: Uses NSApp.applicationIconImage to get app icon from asset catalog (works automatically).
Note: Uses semantic colors (.secondary) for automatic dark mode support.
  </action>
  <verify>
Files exist:
ls -la MDQuickLook/MDQuickLook/Views/AboutView.swift
ls -la MDQuickLook/MDQuickLook/Models/AppState.swift

Build succeeds after adding to project (Task 3 handles project updates):
swift -typecheck MDQuickLook/MDQuickLook/Views/AboutView.swift MDQuickLook/MDQuickLook/Models/AppState.swift 2>&1 | head -5
(May show import errors before project integration - that's OK)
  </verify>
  <done>AboutView.swift displays icon, app name, version, GitHub link (as URL), brief description, and copyright. AppState.swift provides Bundle version extension.</done>
</task>

<task type="auto">
  <name>Task 2: Create FirstLaunchView and SettingsView</name>
  <files>
MDQuickLook/MDQuickLook/Views/FirstLaunchView.swift
MDQuickLook/MDQuickLook/Views/SettingsView.swift
  </files>
  <action>
Create FirstLaunchView.swift for first-launch status window:
```swift
import SwiftUI

struct FirstLaunchView: View {
    @Environment(\.dismiss) private var dismiss
    @Environment(\.openURL) private var openURL

    var body: some View {
        VStack(spacing: 20) {
            // Header
            Image(nsImage: NSApp.applicationIconImage)
                .resizable()
                .frame(width: 64, height: 64)

            Text("Welcome to MD Quick Look")
                .font(.title2)
                .fontWeight(.semibold)

            // Extension status explanation
            VStack(alignment: .leading, spacing: 12) {
                Text("Quick Look Extension Status")
                    .font(.headline)

                Text("To preview Markdown files in Finder, the Quick Look extension must be enabled in System Settings.")
                    .font(.body)
                    .foregroundColor(.secondary)
                    .fixedSize(horizontal: false, vertical: true)

                // Link to System Settings
                Button("Open Login Items & Extensions...") {
                    // Open System Settings to Login Items & Extensions
                    if let url = URL(string: "x-apple.systempreferences:com.apple.LoginItems-Settings.extension") {
                        openURL(url)
                    }
                }
                .buttonStyle(.borderedProminent)

                Text("Enable \"MD Quick Look\" under Quick Look extensions.")
                    .font(.caption)
                    .foregroundColor(.secondary)
            }
            .padding()
            .background(Color(nsColor: .controlBackgroundColor))
            .cornerRadius(8)

            Spacer()

            // Dismiss button
            Button("Get Started") {
                dismiss()
            }
            .keyboardShortcut(.defaultAction)
        }
        .padding(24)
        .frame(width: 400, height: 360)
    }
}
```

Create SettingsView.swift for Preferences window (minimal, shows extension status):
```swift
import SwiftUI

struct SettingsView: View {
    @Environment(\.openURL) private var openURL

    var body: some View {
        Form {
            Section {
                VStack(alignment: .leading, spacing: 12) {
                    Label("Quick Look Extension", systemImage: "eye.fill")
                        .font(.headline)

                    Text("The Quick Look extension lets you preview Markdown files by pressing Space in Finder.")
                        .font(.body)
                        .foregroundColor(.secondary)

                    HStack {
                        Text("Status:")
                            .foregroundColor(.secondary)
                        Text("Check in System Settings")
                            .foregroundColor(.secondary)
                            .italic()
                    }
                    .font(.callout)

                    Button("Open Extension Settings...") {
                        if let url = URL(string: "x-apple.systempreferences:com.apple.LoginItems-Settings.extension") {
                            openURL(url)
                        }
                    }
                }
                .padding(.vertical, 8)
            } header: {
                Text("Extension")
            }

            Section {
                VStack(alignment: .leading, spacing: 8) {
                    Text("Version \(Bundle.main.releaseVersionNumber ?? "Unknown")")
                        .font(.callout)

                    Link("View on GitHub",
                         destination: URL(string: "https://github.com/razielpanic/md-quick-look")!)
                        .font(.callout)
                }
                .padding(.vertical, 4)
            } header: {
                Text("About")
            }
        }
        .formStyle(.grouped)
        .frame(width: 450, height: 320)
    }
}
```

Note: Uses .controlBackgroundColor for dark mode compatible background.
Note: Extension status cannot be checked programmatically - direct users to System Settings per RESEARCH.md.
Note: System Settings URL may not deep-link perfectly but will open Settings app.
  </action>
  <verify>
Files exist:
ls -la MDQuickLook/MDQuickLook/Views/FirstLaunchView.swift
ls -la MDQuickLook/MDQuickLook/Views/SettingsView.swift
  </verify>
  <done>FirstLaunchView shows extension status info, System Settings link, and Get Started dismiss button. SettingsView shows extension status section with System Settings link and version/GitHub info.</done>
</task>

<task type="auto">
  <name>Task 3: Wire views into MDQuickLookApp and update project</name>
  <files>
MDQuickLook/MDQuickLook/MDQuickLookApp.swift
MDQuickLook/MDQuickLook.xcodeproj/project.pbxproj
  </files>
  <action>
Update MDQuickLookApp.swift to use actual views instead of placeholders:

1. Replace EmptyView() in Settings scene with SettingsView()
2. Replace EmptyView() in About window with AboutView()
3. Replace EmptyView() in FirstLaunch window with FirstLaunchView()

The Window scenes should now be:
```swift
Settings {
    SettingsView()
}

Window("About MD Quick Look", id: "about") {
    AboutView()
}
.windowResizability(.contentSize)
.restorationBehavior(.disabled)

Window("Welcome", id: "firstLaunch") {
    FirstLaunchView()
}
.windowResizability(.contentSize)
.restorationBehavior(.disabled)
```

Update project.pbxproj to add new Swift files:

Add to PBXFileReference section (use unique UUIDs like AC, AD, AE, AF pattern):
- AboutView.swift
- SettingsView.swift
- FirstLaunchView.swift
- AppState.swift

Add to PBXBuildFile section (Sources build phase for MDQuickLook target):
- Each new .swift file needs a build file entry

Add to PBXGroup section:
- Create Views group under MDQuickLook
- Create Models group under MDQuickLook
- Add files to their respective groups

Add to Sources build phase (1A1A1A1A1A1A1A1A1A1A1A1D):
- Add build file references for all 4 new Swift files

Build and verify:
xcodebuild -project MDQuickLook/MDQuickLook.xcodeproj -scheme MDQuickLook -configuration Release build 2>&1 | grep -E "(BUILD SUCCEEDED|error:)"
  </action>
  <verify>
Build succeeds:
xcodebuild -project MDQuickLook/MDQuickLook.xcodeproj -scheme MDQuickLook -configuration Release build 2>&1 | tail -5

All files in project:
grep -E "(AboutView|SettingsView|FirstLaunchView|AppState)" MDQuickLook/MDQuickLook.xcodeproj/project.pbxproj | head -10
  </verify>
  <done>All views wired into MDQuickLookApp.swift, project.pbxproj updated with new files, build succeeds.</done>
</task>

</tasks>

<verification>
1. All view files exist in correct directories:
   - MDQuickLook/MDQuickLook/Views/AboutView.swift
   - MDQuickLook/MDQuickLook/Views/SettingsView.swift
   - MDQuickLook/MDQuickLook/Views/FirstLaunchView.swift
   - MDQuickLook/MDQuickLook/Models/AppState.swift

2. Views are wired into MDQuickLookApp.swift (not EmptyView)

3. Project builds successfully:
   xcodebuild -project MDQuickLook/MDQuickLook.xcodeproj -scheme MDQuickLook -configuration Release build

4. App can be launched (functional testing in 08-03):
   open build/Build/Products/Release/MDQuickLook.app
</verification>

<success_criteria>
- AboutView displays icon, app name, version, GitHub link (as URL text), and copyright
- FirstLaunchView shows extension status guidance with System Settings button
- SettingsView shows extension status with System Settings link
- All views use semantic colors for dark mode support
- Build succeeds with all files integrated
- Views replace placeholder EmptyView() in app scenes
</success_criteria>

<output>
After completion, create `.planning/phases/08-swiftui-host-app-ui/08-02-SUMMARY.md`
</output>
