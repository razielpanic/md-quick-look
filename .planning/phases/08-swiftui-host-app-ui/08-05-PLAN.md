---
phase: 08-swiftui-host-app-ui
plan: 05
type: execute
wave: 1
depends_on: []
files_modified:
  - MDQuickLook/MDQuickLook/MDQuickLookApp.swift
autonomous: true
gap_closure: true

must_haves:
  truths:
    - "User can open Settings window from menu bar using Settings... menu item"
    - "Cmd+, keyboard shortcut opens Settings window"
    - "Settings window can be reopened after dismissing first-launch"
  artifacts:
    - path: "MDQuickLook/MDQuickLook/MDQuickLookApp.swift"
      provides: "Settings scene with keyboard shortcut"
  key_links:
    - from: "Menu bar"
      to: "SettingsView"
      via: "Settings scene with Cmd+, shortcut"
      pattern: "Settings\\s*\\{"
---

<objective>
Add Settings scene so users can access Settings window from menu bar.

Purpose: Address UAT feedback that Settings window is inaccessible after first-launch dismissal
Output: Settings menu item with Cmd+, keyboard shortcut that opens SettingsView
</objective>

<execution_context>
@/Users/razielpanic/.claude/get-shit-done/workflows/execute-plan.md
@/Users/razielpanic/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/08-swiftui-host-app-ui/08-UAT.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add Settings scene to MDQuickLookApp</name>
  <files>MDQuickLook/MDQuickLook/MDQuickLookApp.swift</files>
  <action>
  Add a Settings scene to MDQuickLookApp that displays SettingsView:

  1. Add a Settings scene after the WindowGroup in the body:
     ```swift
     Settings {
         SettingsView()
     }
     ```

  2. This automatically provides:
     - "Settings..." menu item in the app menu (MD Quick Look menu)
     - Cmd+, keyboard shortcut
     - Standard macOS settings window behavior

  3. Keep the ContentRouter in the main WindowGroup for first-launch flow

  4. The ContentRouter will still show SettingsView after first-launch, but now users
     can ALSO access Settings via Cmd+, even if they close the main window.

  Note: SwiftUI Settings scene requires macOS 11+ which we already target.
  Do NOT use .windowStyle or .windowResizability on Settings - it doesn't support those modifiers.
  </action>
  <verify>Build succeeds and Settings scene is present: `cd MDQuickLook && xcodebuild -scheme MDQuickLook build && grep -A2 "Settings {" MDQuickLook/MDQuickLookApp.swift`</verify>
  <done>Settings scene added, Cmd+, opens SettingsView from anywhere in the app</done>
</task>

</tasks>

<verification>
1. Build succeeds: `cd MDQuickLook && xcodebuild -scheme MDQuickLook build`
2. Settings scene exists: `grep -A2 "Settings {" MDQuickLook/MDQuickLook/MDQuickLookApp.swift`
3. Launch app and verify: Settings... appears in MD Quick Look menu, Cmd+, shortcut works
</verification>

<success_criteria>
- "Settings..." menu item appears in MD Quick Look app menu
- Cmd+, keyboard shortcut opens Settings window
- Settings window displays SettingsView content
- User can access Settings after closing main window
</success_criteria>

<output>
After completion, create `.planning/phases/08-swiftui-host-app-ui/08-05-SUMMARY.md`
</output>
