---
phase: 08-swiftui-host-app-ui
plan: 04
type: execute
wave: 1
depends_on: []
files_modified:
  - MDQuickLook/MDQuickLook/Views/FirstLaunchView.swift
  - MDQuickLook/MDQuickLook/Views/SettingsView.swift
autonomous: true
gap_closure: true

must_haves:
  truths:
    - "First-launch window uses normal macOS app window styling"
    - "Settings view uses clean utility-app aesthetic without iOS-style forms"
    - "System Settings button opens directly to Extensions pane"
  artifacts:
    - path: "MDQuickLook/MDQuickLook/Views/FirstLaunchView.swift"
      provides: "Clean VStack layout for first-launch welcome"
    - path: "MDQuickLook/MDQuickLook/Views/SettingsView.swift"
      provides: "Simple VStack layout for settings content"
  key_links:
    - from: "SettingsView.swift"
      to: "System Settings Extensions pane"
      via: "openURL with x-apple.systempreferences:com.apple.ExtensionsPreferences"
      pattern: "com\\.apple\\.ExtensionsPreferences"
---

<objective>
Fix visual styling and System Settings deep link in FirstLaunchView and SettingsView.

Purpose: Address UAT feedback about iOS-style visual chrome and imprecise System Settings navigation
Output: Clean utility-app aesthetic matching macOS conventions, direct navigation to Extensions pane
</objective>

<execution_context>
@/Users/razielpanic/.claude/get-shit-done/workflows/execute-plan.md
@/Users/razielpanic/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/08-swiftui-host-app-ui/08-UAT.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Simplify SettingsView layout</name>
  <files>MDQuickLook/MDQuickLook/Views/SettingsView.swift</files>
  <action>
  Replace the Form with .formStyle(.grouped) with a simple VStack layout:

  1. Remove the Form and all Section wrappers
  2. Use VStack with alignment: .leading and spacing: 20
  3. Keep the existing content structure but without section headers
  4. Use a subtle divider between the extension info and the about info
  5. Add padding(24) to the main VStack
  6. Update the System Settings URL from:
     `x-apple.systempreferences:com.apple.LoginItems-Settings.extension`
     to:
     `x-apple.systempreferences:com.apple.ExtensionsPreferences`
  7. Keep frame dimensions at 450x320

  The result should be a clean, flat layout appropriate for a utility app, not a settings pane with heavy iOS-style grouped sections.
  </action>
  <verify>Build succeeds with `cd MDQuickLook && xcodebuild -scheme MDQuickLook -configuration Debug build 2>&1 | tail -20`</verify>
  <done>SettingsView uses VStack layout without Form sections, URL points to ExtensionsPreferences</done>
</task>

<task type="auto">
  <name>Task 2: Update FirstLaunchView System Settings URL</name>
  <files>MDQuickLook/MDQuickLook/Views/FirstLaunchView.swift</files>
  <action>
  Update the System Settings button URL scheme:

  1. Change the URL from:
     `x-apple.systempreferences:com.apple.LoginItems-Settings.extension`
     to:
     `x-apple.systempreferences:com.apple.ExtensionsPreferences`

  2. Update the button label from "Open Login Items & Extensions..." to "Open Extensions Settings..."

  3. Update the helper text below the button to match - remove reference to "Login Items"

  The FirstLaunchView already uses VStack, so no layout changes needed.
  </action>
  <verify>Grep confirms new URL: `grep -r "ExtensionsPreferences" MDQuickLook/MDQuickLook/Views/`</verify>
  <done>Both views use com.apple.ExtensionsPreferences URL scheme for direct Extensions pane access</done>
</task>

</tasks>

<verification>
1. Build succeeds: `cd MDQuickLook && xcodebuild -scheme MDQuickLook build`
2. No Form or .formStyle references remain: `grep -r "formStyle\|Form {" MDQuickLook/MDQuickLook/Views/`
3. Both files use correct URL: `grep -r "ExtensionsPreferences" MDQuickLook/MDQuickLook/Views/`
</verification>

<success_criteria>
- SettingsView displays with clean VStack layout, no iOS-style grouped sections
- Both views link to com.apple.ExtensionsPreferences for direct Extensions pane access
- Project builds without errors
</success_criteria>

<output>
After completion, create `.planning/phases/08-swiftui-host-app-ui/08-04-SUMMARY.md`
</output>
