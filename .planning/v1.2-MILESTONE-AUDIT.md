---
milestone: 1.2
audited: 2026-02-07
status: tech_debt
scores:
  requirements: 22/22
  phases: 5/5
  integration: 4/4
  flows: 3/3
gaps:
  requirements: []
  integration: []
  flows: []
tech_debt:
  - phase: 15-cross-context-integration
    items:
      - "Extension sources compiled directly in test target (Option C) — workaround for SPM C module transitive dependency issue with @testable import. Revisit when Xcode/SPM fix lands."
  - phase: 11-yaml-front-matter
    items:
      - "paragraphSpacingBefore workaround: 8pt spacer line used for top padding inside front matter block because line fragment rect includes paragraph spacing"
  - phase: 15-cross-context-integration
    items:
      - "No formal VERIFICATION.md files for any phase — phases were verified informally via self-checks in SUMMARY files"
---

# Milestone v1.2 Audit Report

## Summary

**Milestone:** v1.2 — Rendering Polish & Features
**Status:** Tech Debt (all requirements met, no blockers, accumulated tech debt items)
**Audited:** 2026-02-07
**Phases:** 11-15 (5 phases, all complete)

## Requirements Coverage

All 22 v1.2 requirements are satisfied.

| Requirement | Phase | Status |
|-------------|-------|--------|
| YAML-01: YAML front matter detected between `---` delimiters | Phase 11 | Satisfied |
| YAML-02: Front matter stripped from body before parsing | Phase 11 | Satisfied |
| YAML-03: Key-value pairs displayed as styled section | Phase 11 | Satisfied |
| YAML-04: List values rendered as comma-separated text | Phase 11 | Satisfied |
| YAML-05: Front matter section visually distinct from body | Phase 11 | Satisfied |
| YAML-06: Edge cases handled gracefully | Phase 11 | Satisfied |
| LAYOUT-01: System-managed sizing with autoresizing | Phase 12 | Satisfied |
| LAYOUT-02: Extension detects narrow context and passes width | Phase 12 | Satisfied |
| LAYOUT-03: All font sizes scale proportionally in narrow | Phase 12 | Satisfied |
| LAYOUT-04: Insets and padding adapt to available width | Phase 12 | Satisfied |
| LAYOUT-05: Rendering works across all Quick Look contexts | Phase 15 | Satisfied |
| TABLE-01: Table widths scale to available container width | Phase 13 | Satisfied |
| TABLE-02: Column min/max widths scale for narrow contexts | Phase 13 | Satisfied |
| TABLE-03: Cell padding reduces in narrow contexts | Phase 13 | Satisfied |
| TABLE-04: Compact table mode at very narrow widths | Phase 13 | Satisfied |
| TABLE-05: Tables readable and not clipped in preview pane | Phase 13 | Satisfied |
| TASK-01: `- [ ]` renders with SF Symbol empty checkbox | Phase 14 | Satisfied |
| TASK-02: `- [x]` renders with SF Symbol filled checkbox | Phase 14 | Satisfied |
| TASK-03: Checkboxes colored with system accent blue | Phase 14 | Satisfied |
| TASK-04: Checkbox baseline-aligned with text | Phase 14 | Satisfied |
| TASK-05: Mixed lists render correctly | Phase 14 | Satisfied |
| TASK-06: Task list items in code blocks not converted | Phase 14 | Satisfied |

**Score: 22/22 requirements satisfied**

## Phase Verification Summary

| Phase | Name | Self-Check | Deviations | Commits |
|-------|------|------------|------------|---------|
| 11 | YAML Front Matter | PASSED | 2 auto-fixed (padding, truncation) | 4 |
| 12 | Layout Sizing | PASSED (both plans) | 2 auto-fixed (inline code range, YAML tabs) | 3 |
| 13 | Table Rendering | PASSED (both plans) | 0 | 4 |
| 14 | Task List Checkboxes | PASSED | 3 auto-fixed (nested list, dedup, wrapping) | 3 |
| 15 | Cross-Context Integration | PASSED (both plans) | 3 auto-fixed (scheme, build, height) | 5 |

**Score: 5/5 phases passed**

Note: No formal VERIFICATION.md files exist. Verification was performed via self-checks documented in each phase's SUMMARY.md files.

## Cross-Phase Integration

| Connection | From | To | Status |
|------------|------|-----|--------|
| YAML + Width Tier | Phase 11 | Phase 12 | Connected |
| Width + Available Width → Tables | Phase 12 | Phase 13 | Connected |
| Width Tier → Task Lists | Phase 12 | Phase 14 | Connected |
| All Features → Snapshot Tests | Phase 11-14 | Phase 15 | Connected |

**Score: 4/4 connections verified**

### Integration Details

1. **Phase 11 → Phase 12**: `renderFrontMatter()` uses `widthTier` for adaptive font sizing (10pt/12pt) and field capping (5 fields max in narrow mode)
2. **Phase 12 → Phase 13**: `availableWidth` threads from PreviewViewController through MarkdownRenderer to TableRenderer for content-proportional column sizing
3. **Phase 12 → Phase 14**: Task list checkboxes use `currentBodyFontSize` and tier-aware indent values (10pt/20pt firstLineHeadIndent)
4. **Phases 11-14 → Phase 15**: comprehensive-v1.2.md exercises all features; 6 snapshots recorded at 3 widths x 2 appearances

## E2E Flow Verification

| Flow | Description | Status |
|------|-------------|--------|
| Spacebar Quick Look | Select .md → spacebar → formatted preview with all features | Complete |
| Finder Preview Pane | Column view → narrow render with scaled fonts, compact tables, capped YAML | Complete |
| Dark Mode | System dark mode → semantic colors → correct appearance | Complete |

**Score: 3/3 flows verified**

## Tech Debt

### Phase 15: Test Target Build Workaround

**Item:** Extension .swift source files compiled directly in test target (Option C)
**Reason:** SPM C module transitive dependency issue prevents `@testable import MDQuickLook_Extension` in Xcode 16.1+. Known Xcode/SPM limitation with app extensions using packages containing C modules (swift-cmark).
**Impact:** Duplicates source compilation; test target compiles extension sources independently
**Action:** Revisit when Apple fixes SPM transitive C module visibility for app extension targets

### Phase 11: Spacer Line Workaround

**Item:** 8pt spacer line used for top padding inside YAML front matter block
**Reason:** `paragraphSpacingBefore` doesn't create visible gap between background top and text because NSLayoutManager's line fragment rect includes the paragraph spacing
**Impact:** Minor — adds invisible spacer character to attributed string
**Action:** Low priority, works correctly

### Process: Missing Formal Verification

**Item:** No VERIFICATION.md files exist for any phase
**Reason:** Phases were verified via self-checks in SUMMARY files rather than formal verification workflow
**Impact:** Less structured verification record; all self-checks passed
**Action:** Use formal verification for v1.3 phases

**Total: 3 tech debt items across 2 phases + 1 process item**

---
*Audited: 2026-02-07*
*Milestone: v1.2 Rendering Polish & Features*
