---
milestone: v1.2
audited: 2026-02-07T23:00:00Z
status: tech_debt
scores:
  requirements: 22/22
  phases: 5/5
  integration: 12/12
  flows: 4/4
gaps:
  requirements: []
  integration: []
  flows: []
tech_debt:
  - phase: 14-task-list-checkboxes
    items:
      - "Documentation drift: REQUIREMENTS.md says square checkboxes (TASK-01, TASK-02), implementation uses circle per user decision"
  - phase: 15-cross-context-integration
    items:
      - "Deferred: MIT license attribution in app UI (area: ui)"
      - "Deferred: Preferences toggle for YAML front matter display (area: ui, requires App Group)"
      - "Deferred: Dark mode background color inconsistency across sections (area: rendering)"
      - "Test target workaround: extension sources compiled directly into test target (Option C) due to SPM C module transitive dependency issue"
---

# Milestone v1.2 Audit Report: Rendering Polish & Features

**Audited:** 2026-02-07
**Status:** tech_debt (all requirements met, no critical blockers, accumulated deferred items)

## Requirements Coverage

All 22 v1.2 requirements satisfied across 5 phases.

| Requirement | Phase | Status |
|-------------|-------|--------|
| YAML-01: Front matter detected between `---` delimiters | Phase 11 | SATISFIED |
| YAML-02: Front matter stripped from body before parsing | Phase 11 | SATISFIED |
| YAML-03: Key-value pairs as styled section (bold keys, normal values) | Phase 11 | SATISFIED |
| YAML-04: List values rendered as comma-separated inline text | Phase 11 | SATISFIED |
| YAML-05: Front matter section visually distinct from body | Phase 11 | SATISFIED |
| YAML-06: Edge cases (empty, CRLF, no closing delimiter) | Phase 11 | SATISFIED |
| LAYOUT-01: System-managed sizing, no preferredContentSize | Phase 12 | SATISFIED |
| LAYOUT-02: Narrow context detection via view.bounds.width | Phase 12 | SATISFIED |
| LAYOUT-03: Font sizes scale proportionally in narrow contexts | Phase 12 | SATISFIED |
| LAYOUT-04: Text container insets adapt to available width | Phase 12 | SATISFIED |
| TABLE-01: maxTableWidth scales to container width | Phase 13 | SATISFIED |
| TABLE-02: Column min/max widths scale proportionally | Phase 13 | SATISFIED |
| TABLE-03: Cell padding reduces in narrow contexts | Phase 13 | SATISFIED |
| TABLE-04: Compact table mode at very narrow widths | Phase 13 | SATISFIED |
| TABLE-05: Tables readable and not clipped in preview pane | Phase 13 | SATISFIED |
| TASK-01: `- [ ]` renders with SF Symbol empty checkbox | Phase 14 | SATISFIED |
| TASK-02: `- [x]` renders with SF Symbol filled checkbox | Phase 14 | SATISFIED |
| TASK-03: Checkboxes colored with system accent blue | Phase 14 | SATISFIED |
| TASK-04: Checkbox baseline-aligned with text | Phase 14 | SATISFIED |
| TASK-05: Mixed lists render correctly | Phase 14 | SATISFIED |
| TASK-06: Code blocks not converted to checkboxes | Phase 14 | SATISFIED |
| LAYOUT-05: Rendering correct across all Quick Look contexts | Phase 15 | SATISFIED |

**Score: 22/22 requirements satisfied**

## Phase Verification Summary

| Phase | Status | Score | Verified |
|-------|--------|-------|----------|
| 11 - YAML Front Matter | PASSED | 5/5 truths | 2026-02-06 |
| 12 - Layout & Sizing | PASSED | 19/19 truths (11 core) | 2026-02-06 |
| 13 - Table Rendering | PASSED | 18/18 truths (12 core) | 2026-02-07 |
| 14 - Task List Checkboxes | PASSED | 8/8 truths | 2026-02-07 |
| 15 - Cross-Context Integration | PASSED | 7/7 truths | 2026-02-07 |

**Score: 5/5 phases passed**

## Cross-Phase Integration

Integration checker verified all cross-phase connections:

| From | To | Via | Status |
|------|----|-----|--------|
| Phase 11 (YAML) | Phase 12 (Layout) | renderFrontMatter adapts to WidthTier (10pt/5-field cap narrow) | CONNECTED |
| Phase 12 (Layout) | Phase 13 (Tables) | WidthTier + availableWidth passed PreviewVC → Renderer → TableRenderer | CONNECTED |
| Phase 12 (Layout) | Phase 14 (Tasks) | currentBodyFontSize used for checkbox sizing (12pt narrow / 14pt normal) | CONNECTED |
| Phase 12 (Layout) | LayoutManager | widthTier property synchronized on tier changes | CONNECTED |
| Phases 11-14 | Phase 15 (Integration) | All features exercised in 6 snapshot tests (3 widths x 2 appearances) | CONNECTED |

**Score: 12/12 connections verified (0 orphaned, 0 missing)**

### Rendering Pipeline Order (Verified Correct)

1. extractYAMLFrontMatter → 2. preprocessImages → 3. preprocessTaskLists → 4. markdown parsing → 5. table rendering → 6. base styles → 7. task checkbox styles → 8. list prefixes

## E2E Flows

| Flow | Description | Status |
|------|-------------|--------|
| 1 | Markdown with all v1.2 features opens in spacebar Quick Look (normal tier) | COMPLETE |
| 2 | Same file opens in Finder preview pane (narrow tier, compact rendering) | COMPLETE |
| 3 | User switches contexts → tier change detected, content regenerated | COMPLETE |
| 4 | Snapshot tests pass in verify mode (6 baselines, 0.98 precision) | COMPLETE |

**Score: 4/4 flows complete**

## Anti-Patterns

No blocking anti-patterns found across any phase. One informational observation:

- **TableRenderer.swift:138** — os_log in shouldWrapRow hot path (per-row decision). Low severity, acceptable for debugging.

## Tech Debt by Phase

### Phase 14: Task List Checkboxes
- **Documentation drift:** REQUIREMENTS.md says "square" checkboxes (TASK-01, TASK-02) but implementation uses "circle" variants per user preference. Not an implementation gap — user made deliberate decision during execution.

### Phase 15: Cross-Context Integration
- **Deferred: MIT license attribution in app UI** — UI enhancement, not a rendering requirement
- **Deferred: Preferences toggle for YAML front matter display** — Requires App Group infrastructure, scoped for future milestone
- **Deferred: Dark mode background color inconsistency across sections** — Minor visual polish item
- **Test infrastructure workaround:** Extension sources compiled directly into test target (Option C) due to known Xcode/SPM C module transitive dependency limitation. Pragmatic workaround, not a quality issue.

### Total: 5 items across 2 phases

None are blockers. All are either documentation drift, deferred enhancements, or known platform workarounds.

## Conclusion

Milestone v1.2 has achieved its definition of done:

- **All 22 requirements satisfied** — YAML front matter, responsive layout, table rendering, task list checkboxes, and cross-context integration all shipped
- **All 5 phases passed verification** — Each with 100% of must-have truths verified
- **Full cross-phase integration** — 12/12 connections wired, rendering pipeline order correct
- **All E2E flows complete** — Normal, narrow, and context-switching scenarios verified
- **Snapshot regression safety** — 6 baselines covering 3 widths x 2 appearances

The 5 tech debt items are non-blocking deferred enhancements and documentation updates suitable for backlog tracking.

---
*Audited: 2026-02-07*
*Auditor: Claude (gsd audit-milestone)*
